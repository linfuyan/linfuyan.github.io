<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







  

<link href="https://cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="阿阿燃, uprogrammer, 有程, java, Android, web" />





  <link rel="alternate" href="/atom.xml" title="阿阿燃" type="application/atom+xml" />






<meta property="og:type" content="website">
<meta property="og:title" content="阿阿燃">
<meta property="og:url" content="http://linfuyan.com/page/3/index.html">
<meta property="og:site_name" content="阿阿燃">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="阿阿燃">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://linfuyan.com/page/3/"/>





  <title>阿阿燃</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">阿阿燃</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/$q_and_promise_in_angular/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/$q_and_promise_in_angular/" itemprop="url">形象的讲解 angular 中的 $q 与 promise</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-06T16:17:10+08:00">
                2016-07-06
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2016-07-06T16:20:45+08:00">
                2016-07-06
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/" itemprop="url" rel="index">
                    <span itemprop="name">开发技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/Web前端/" itemprop="url" rel="index">
                    <span itemprop="name">Web前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>promise 不是 angular 首创的，作为一种编程模式，它出现在…1976年，比 javascript 还要古老得多。promise 全称是 Futures and promises。具体的可以参见 <a href="http://en.wikipedia.org/wiki/Futures_and_promises" target="_blank" rel="noopener">http://en.wikipedia.org/wiki/Futures_and_promises</a>。</p>
<p>而在 javascript 世界中，一个广泛流行的库叫做 Q 地址是 <a href="https://github.com/kriskowal/q" target="_blank" rel="noopener">https://github.com/kriskowal/q</a>，而 angular 中的 $q 就是从它引入的。 promise 解决的是异步编程的问题，对于生活在同步编程世界中的程序员来说，它可能比较难于理解，这也构成了 angular 入门门槛之一，本文将用生活中的一个例子对此做一个形象的讲解。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/$q_and_promise_in_angular/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/React+ReactRouter+Redux+Webpack打造SPA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/React+ReactRouter+Redux+Webpack打造SPA/" itemprop="url">React + React Router + Redux + Webpack 开发 SPA</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-26T22:30:00+08:00">
                2016-06-26
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2016-06-26T22:39:20+08:00">
                2016-06-26
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/" itemprop="url" rel="index">
                    <span itemprop="name">开发技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/Web前端/" itemprop="url" rel="index">
                    <span itemprop="name">Web前端</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前段时间要做一个 Web app，于是对 ReactJS 作了些学习。没想到水比较深，由此探索了一套用于开发 SPA 的相关技术： React + React Router + Redex + Webpack。</p>
<p>这里先占个坑，后续再细写。相关的学习资料如下：</p>
<p><a href="http://uprogrammer.cn/react-tutorial-cn/index.html" target="_blank" rel="noopener">ReactJS 入门教程中文版</a></p>
<p><a href="http://uprogrammer.cn/react-router-cn/index.html" target="_blank" rel="noopener">React Router 中文文档</a></p>
<p><a href="http://uprogrammer.cn/redux-in-chinese/index.html" target="_blank" rel="noopener">Redux 中文文档</a></p>
<p><a href="http://uprogrammer.cn/webpack-handbook/index.html" target="_blank" rel="noopener">Webpack 中文手册</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/grab-web-page-by-cheerio-and-render-via-ejs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/grab-web-page-by-cheerio-and-render-via-ejs/" itemprop="url">实例：使用 cheerio 抓取网页数据，并通过 ejs 模板输出静态页面</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-10T10:33:38+08:00">
                2016-04-10
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2019-02-22T09:48:05+08:00">
                2019-02-22
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/" itemprop="url" rel="index">
                    <span itemprop="name">开发技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/nodejs/" itemprop="url" rel="index">
                    <span itemprop="name">nodejs</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>这篇文章中，我将使用 cheerio 从 <a href="http://ss.uprogrammer.cn" target="_blank" rel="noopener">http://ss.uprogrammer.cn</a> 上抓取到免费的 shadowsocks 账号，然后通过 ejs 模板，输出成新的网页。</p>
<p><strong>cheerio</strong> 是 nodejs 的抓取页面模块，为服务器特别定制的，快速、灵活、实施的 jquery 核心实现，适合各种 Web 爬虫程序。详见: <a href="https://github.com/cheeriojs/cheerio" target="_blank" rel="noopener">https://github.com/cheeriojs/cheerio</a></p>
<p><strong>ejs</strong> 是一个 JavaScript 模板库，用来从 JSON 数据中生成 HTML 字符串。详见： <a href="https://github.com/tj/ejs" target="_blank" rel="noopener">https://github.com/tj/ejs</a></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/grab-web-page-by-cheerio-and-render-via-ejs/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/manipulating-url-using-javascript-without-freshing-the-page/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/manipulating-url-using-javascript-without-freshing-the-page/" itemprop="url">如何通过 JS 来修改浏览器地址</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-04T15:07:03+08:00">
                2016-04-04
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-10-18T20:14:28+08:00">
                2018-10-18
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/FAQ/" itemprop="url" rel="index">
                    <span itemprop="name">FAQ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天看到 jsdig.com 上的效果，发现随着输入的变化，浏览器地址栏中的地址会发生变化，很好奇。效果如下图：</p>
<p><img src="https://raw.githubusercontent.com/jaywcjlove/FED/gh-pages/img/fed.gif" alt="jsdig"></p>
<p>所以找了些资料。</p>
<p>现在的浏览器，可以在不刷新页面的情况下修改浏览器 URL。在浏览过程中，可以将浏览历史储存起来，当点击浏览器后退按钮的时候，还可以从浏览历史上获得回退的信息。主要的工作原理呢，是通过 History 对象的 pushState() 实现的。</p>
<p>直接上测试的代码：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">label</span> <span class="attr">id</span>=<span class="string">"counter"</span>&gt;</span>点击按钮查看变化<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"点击"</span> <span class="attr">onclick</span>=<span class="string">"update()"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  	<span class="keyword">var</span> counter = <span class="built_in">document</span>.getElementById(<span class="string">"counter"</span>);</span></span><br><span class="line"><span class="actionscript">   	<span class="keyword">var</span> i = <span class="number">0</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">  	<span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">  		<span class="keyword">var</span> stateObject = &#123;id: i&#125;;</span></span><br><span class="line"><span class="actionscript">		<span class="keyword">var</span> title = <span class="string">"Wow Title "</span>+i;</span></span><br><span class="line"><span class="actionscript">		<span class="keyword">var</span> newUrl = <span class="string">"?count="</span>+i;</span></span><br><span class="line"><span class="undefined">		history.pushState(stateObject, title, newUrl);</span></span><br><span class="line"><span class="javascript">		counter.innerHTML = <span class="built_in">window</span>.location.href;</span></span><br><span class="line"><span class="undefined">		i++;</span></span><br><span class="line"><span class="undefined">  	&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">	<span class="built_in">window</span>.addEventListener(<span class="string">'popstate'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">	  readState(event.state);</span></span><br><span class="line"><span class="undefined">	&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">	<span class="function"><span class="keyword">function</span> <span class="title">readState</span><span class="params">(data)</span></span>&#123;</span></span><br><span class="line"><span class="undefined">	  counter.innerHTML = data.id;</span></span><br><span class="line"><span class="undefined">	&#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>直接把上面的代码保存成静态网页，然后放到 web 服务器下访问就可以了。具体画面如下：</p>
<p><img src="http://img.uprogrammer.cn/static/images/via_js_update_window_location_href.gif" alt="如何通过 JS 来修改浏览器地址"></p>
<p>参考：</p>
<p><a href="https://hasin.me/2013/10/16/manipulating-url-using-javascript-without-freshing-the-page/" target="_blank" rel="noopener">Manipulating browser URL using Javascript without refreshing the page</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/publish_your_module_to_npm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/publish_your_module_to_npm/" itemprop="url">如何使用 npm 打包发布 nodejs 程序包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-04T10:10:10+08:00">
                2016-04-04
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2016-04-04T10:31:16+08:00">
                2016-04-04
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/" itemprop="url" rel="index">
                    <span itemprop="name">开发技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/nodejs/" itemprop="url" rel="index">
                    <span itemprop="name">nodejs</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天写了个 gitbook 的 cnzz 统计插件，<a href="https://github.com/linfuyan/gitbook-plugin-cnzz" target="_blank" rel="noopener">源码见这里</a>，想要发布出来，再通过 <code>npm install</code> 的形式安装。</p>
<p>具体的步骤如下：</p>
<p>1. 在 npm 官网 <a href="https://www.npmjs.org" target="_blank" rel="noopener">https://www.npmjs.org</a> 申请一个账号，并且进行必要的验证。</p>
<blockquote>
<p>刚开始用的是网易邮箱注册，但似乎收不到官方的验证邮件，后来改用了 Gmail，可以注册了。</p>
</blockquote>
<p>2. 增加刚申请完成的用户名到 npm 环境中。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm --registry <span class="string">http:</span><span class="comment">//registry.npmjs.org adduser</span></span><br><span class="line"><span class="string">Username:</span> your name</span><br><span class="line"><span class="string">Password:</span> your password</span><br><span class="line"><span class="string">Email:</span> (<span class="keyword">this</span> IS <span class="keyword">public</span>) yourmail<span class="meta">@host</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里要注意所使用的 registry。由于国内的网络环境，之前将默认的 registry 设置成了淘宝的 npm 源。这里需要调整回来。</p>
</blockquote>
<p>3. 进入到你的 npm 项目中，通过 <code>npm publish</code> 发布。</p>
<p>4. 再新建一个项目 nodejs 项目，通过 <code>npm install</code> 验证是否能够安装。</p>
<p>我在发布过程中，遇到了如下问题：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm ERR! no_perms Private mode enable, only admin can publish <span class="keyword">this</span> <span class="keyword">module</span>: gitbook-plugin-cnzz</span><br></pre></td></tr></table></figure>
<p>原因就是我默认使用的淘宝的 npm 源，添加了用户，但权限不对，在发布时同样添加 registry 就可以了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/create_springmvc_project_base_on_gradle_use_intellij_idea/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/create_springmvc_project_base_on_gradle_use_intellij_idea/" itemprop="url">在 IntelliJ IDEA 上创建基于 Gradle 的 SpringMVC 实例</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-03-22T11:15:02+08:00">
                2016-03-22
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-10-18T20:14:28+08:00">
                2018-10-18
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/" itemprop="url" rel="index">
                    <span itemprop="name">开发技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/JavaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">JavaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>注意：需要 IntelliJ IDEA 的 Ultimate 版本，用 Community 版本是不行的，因为需要支持 Web 项目。 Ultimate 版本是收费的，网上有破解。</p>
<p><img src="http://img.uprogrammer.cn/static/images/intellij_idea.png" alt="IntelliJ IDEA 版本"></p>
<p>我把具体的过程录制成了视频：</p>
<iframe frameborder="0" width="100%" height="400" src="http://v.qq.com/iframe/player.html?vid=r0188ue1mgk&tiny=0&auto=0" allowfullscreen></iframe>

<p>如果想要看高清的视频，可以扫描页面上的公众号二维码，关注并回复”firstspringmvc”来获取原始视频链接。</p>
<p>参考：</p>
<p><a href="http://note.youdao.com/share/web/file.html?id=f6818219990d6a031ef8b237e12c3ff4&amp;type=note" target="_blank" rel="noopener">intellij + gradle + tomcat + 热加载 + 测试 搭建java web开发环境</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/install_mysql_via_brew_on_osx_eicapitan/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/install_mysql_via_brew_on_osx_eicapitan/" itemprop="url">Mac OSX 10.11 通过 HomeBrew 安装 MySQL</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-03-01T21:00:00+08:00">
                2016-03-01
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2016-03-08T22:07:00+08:00">
                2016-03-08
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/软件工具/" itemprop="url" rel="index">
                    <span itemprop="name">软件工具</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/软件工具/LAMP/" itemprop="url" rel="index">
                    <span itemprop="name">LAMP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在 Mac OSX 升级到 EICapitan 之后，原来安装的 MySQL 就多多少少出现了问题。于是决定重装：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">$ brew <span class="keyword">install</span> mysql</span><br><span class="line">==&gt; Installing dependencies <span class="keyword">for</span> mysql: openssl</span><br><span class="line">==&gt; Installing mysql dependency: openssl</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/openssl<span class="number">-1.0</span><span class="number">.2</span>e_1.el_capitan</span><br><span class="line">######################################################################## <span class="number">100.0</span>%</span><br><span class="line">==&gt; Pouring openssl<span class="number">-1.0</span><span class="number">.2</span>e_1.el_capitan.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">A CA <span class="keyword">file</span> has been bootstrapped <span class="keyword">using</span> certificates <span class="keyword">from</span> the <span class="keyword">system</span></span><br><span class="line">keychain. <span class="keyword">To</span> <span class="keyword">add</span> additional certificates, place .pem files <span class="keyword">in</span></span><br><span class="line">  /usr/<span class="keyword">local</span>/etc/openssl/certs</span><br><span class="line"></span><br><span class="line"><span class="keyword">and</span> run</span><br><span class="line">  /usr/<span class="keyword">local</span>/opt/openssl/<span class="keyword">bin</span>/c_rehash</span><br><span class="line"></span><br><span class="line">This formula <span class="keyword">is</span> keg-<span class="keyword">only</span>, which means it was <span class="keyword">not</span> symlinked <span class="keyword">into</span> /usr/local.</span><br><span class="line"></span><br><span class="line">Apple has deprecated <span class="keyword">use</span> <span class="keyword">of</span> OpenSSL <span class="keyword">in</span> favor <span class="keyword">of</span> its own TLS <span class="keyword">and</span> crypto libraries</span><br><span class="line"></span><br><span class="line">Generally there <span class="keyword">are</span> <span class="keyword">no</span> consequences <span class="keyword">of</span> this <span class="keyword">for</span> you. <span class="keyword">If</span> you <span class="keyword">build</span> your</span><br><span class="line">own software <span class="keyword">and</span> it requires this formula, you<span class="string">'ll need to add to your</span></span><br><span class="line"><span class="string">build variables:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    LDFLAGS:  -L/usr/local/opt/openssl/lib</span></span><br><span class="line"><span class="string">    CPPFLAGS: -I/usr/local/opt/openssl/include</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">==&gt; Summary</span></span><br><span class="line"><span class="string">🍺  /usr/local/Cellar/openssl/1.0.2e_1: 465 files, 11.9M</span></span><br><span class="line"><span class="string">==&gt; Installing mysql</span></span><br><span class="line"><span class="string">==&gt; Downloading https://homebrew.bintray.com/bottles/mysql-5.7.10.el_capitan.bot</span></span><br><span class="line"><span class="string">######################################################################## 100.0%</span></span><br><span class="line"><span class="string">==&gt; Pouring mysql-5.7.10.el_capitan.bottle.2.tar.gz</span></span><br><span class="line"><span class="string">==&gt; /usr/local/Cellar/mysql/5.7.10/bin/mysqld --initialize-insecure --user=lfy -</span></span><br><span class="line"><span class="string">==&gt; Caveats</span></span><br><span class="line"><span class="string">We'</span>ve installed your MySQL <span class="keyword">database</span> <span class="keyword">without</span> a root password. <span class="keyword">To</span> secure it run:</span><br><span class="line">    mysql_secure_installation</span><br><span class="line"></span><br><span class="line"><span class="keyword">To</span> <span class="keyword">connect</span> run:</span><br><span class="line">    mysql -uroot</span><br><span class="line"></span><br><span class="line"><span class="keyword">To</span> have launchd <span class="keyword">start</span> mysql <span class="keyword">at</span> login:</span><br><span class="line">  <span class="keyword">ln</span> -sfv /usr/<span class="keyword">local</span>/opt/mysql<span class="comment">/*.plist ~/Library/LaunchAgents</span></span><br><span class="line"><span class="comment">Then to load mysql now:</span></span><br><span class="line"><span class="comment">  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span></span><br><span class="line"><span class="comment">Or, if you don't want/need launchctl, you can just run:</span></span><br><span class="line"><span class="comment">  mysql.server start</span></span><br><span class="line"><span class="comment">==&gt; Summary</span></span><br><span class="line"><span class="comment">🍺  /usr/local/Cellar/mysql/5.7.10: 12,677 files, 433.2M</span></span><br></pre></td></tr></table></figure>
<p>直接使用 <code>mysql -uroot</code>，出现如下错误提示：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ERROR </span>2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock'</span><br></pre></td></tr></table></figure>
<p>原因是 mysql 服务没有启动，故尝试 <code>mysql.server start</code>，结果如下，依然出错。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mysql.server start</span><br><span class="line">Starting MySQL</span><br><span class="line">. ERROR! The<span class="built_in"> server </span>quit without updating PID file (/usr/local/var/mysql/bogon.pid).</span><br></pre></td></tr></table></figure>
<p>最终的处理方式是：</p>
<ol>
<li>通过 <code>mysqld</code> 直接启动 mysql。</li>
<li>由于 HomeBrew 安装的 mysql 默认root账户没有设置密码，故按照提示输入 <code>mysql_secure_installation</code> 来设置密码。</li>
<li>设置完成以后，就可以正常操作 mysql 了。</li>
</ol>
<p>HomeBrew 安装的 mysql 的数据存储位置为 <code>/usr/local/var/mysql</code>。 可以通过 <code>find / -name databasename</code> 的方式根据数据库名称找到具体位置。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/install-mongodb-on-mac-os-x/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/install-mongodb-on-mac-os-x/" itemprop="url">Mac OS X 上安装 MongoDB</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-12-21T17:02:00+08:00">
                2015-12-21
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2015-12-21T17:41:06+08:00">
                2015-12-21
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/" itemprop="url" rel="index">
                    <span itemprop="name">开发技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/nodejs/" itemprop="url" rel="index">
                    <span itemprop="name">nodejs</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>参考：<a href="https://docs.mongodb.org/manual/tutorial/install-mongodb-on-os-x/" target="_blank" rel="noopener">Install MongoDB on OS X</a></p>
<p><strong>Mac OS X 的系统版本：EI Capitan (10.11.1)</strong></p>
<p>这里采用 HomeBrew 来安装 MongoDB。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/install-mongodb-on-mac-os-x/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/how-to-be-a-niubility-engineer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/how-to-be-a-niubility-engineer/" itemprop="url">技术高手如何炼成？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-12-01T12:09:37+08:00">
                2015-12-01
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-10-18T20:14:28+08:00">
                2018-10-18
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/深度文摘/" itemprop="url" rel="index">
                    <span itemprop="name">深度文摘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>著作权归作者所有。<br>商业转载请联系作者获得授权，非商业转载请注明出处。<br>作者：郑昀<br>链接：<a href="http://zhuanlan.zhihu.com/zhengyun/20270317" target="_blank" rel="noopener">http://zhuanlan.zhihu.com/zhengyun/20270317</a><br>来源：知乎</p>
</blockquote>
<p><img src="http://img.uprogrammer.cn/static/images/bingshanyijiao.jpg" alt="技术高手如何炼成？"></p>
<p>面试的时候，我会问面试者，你日常如何构建自己的知识体系，如何让自己更高更快更强？多数工程师并没有深入地思考过这个问题，基本上是零敲碎打，随机性大。本着不能让你白来一趟的精神，好为人师的我会娓娓道来：</p>
<h2 id="第一阶段-认真构建完整的知识体系"><a href="#第一阶段-认真构建完整的知识体系" class="headerlink" title="第一阶段 认真构建完整的知识体系"></a>第一阶段 认真构建完整的知识体系</h2><p>十几年前我投身软件行业的时候，光是讲解数据库原理、操作系统、TCP/IP、组网、算法等等基础知识的英文原版书摞起来就等身，认认真真看完，各种上手实践，入行后，读遍 C++ 各种经典著作，读遍各种协议原文，认认真真打基础。很多工程师都说自己平常就是在某些 IT 门户上看看推荐的博文或新闻，我说这属于典型的零敲碎打，不够刺激。</p>
<p>聊到这时，我会举一个例子，<strong>为什么要阅读长篇小说，因为中短篇小说就像用针扎你，而长篇小说就像把你装进一个沙袋里吊起来，从四面八方用狼牙棒打你，酣畅淋漓。</strong>构建可用的知识体系，就得读书，书是有体系结构的，你关心不关心，现阶段你用到用不到，它都讲到了，从头到尾看几遍，针扎得透透的。</p>
<p>何谓知识体系？</p>
<p>几年前，前支付宝架构师姚建东曾经在我们公司做过技术人员如何规划自己的分享讲座，他是这么论述的：</p>
<p>技术与技巧包括：</p>
<ul>
<li>计算机基础理论<ul>
<li>计算机模型：内存/IO/时钟/CPU……</li>
</ul>
</li>
<li>算法</li>
<li>专项技术领域：<ul>
<li>数据挖掘</li>
<li>数据管理</li>
<li>智能推荐</li>
<li>搜索</li>
<li>……</li>
</ul>
</li>
<li>语言与工具<ul>
<li>语言与相关体系</li>
<li>开发工具，分析工具，代码管理工具</li>
<li>HTML/CSS/JS/Ajax</li>
<li>常用框架与第三方类库</li>
</ul>
</li>
<li>调试与测试<ul>
<li>调试方法和哲学</li>
<li>定位问题</li>
<li>BUG管理工具</li>
<li>单元测试</li>
<li>集成测试</li>
<li>性能测试</li>
<li>安全测试</li>
<li>兼容性测试与方法</li>
<li>JS/Ajax测试与方法</li>
<li>服务层测试</li>
<li>Web层测试</li>
</ul>
</li>
<li>网络与系统<ul>
<li>TCP/IP协议与模型，HTTP/SMTP等协议</li>
<li>Linux系统，网络分析工具，系统分析工具</li>
<li>容量，流量与负载均衡</li>
<li>应用部署、规范、规划</li>
<li>安全</li>
<li>监控与故障分析</li>
<li>磁盘与存储</li>
<li>Shell</li>
<li>DNS与域名</li>
<li>缓存，反向代理</li>
<li>图片服务器（海量小文件）</li>
</ul>
</li>
<li>需求挖掘与分析<ul>
<li>需求文档格式</li>
<li>需求访谈</li>
<li>需求分析方法，需求分析工具</li>
<li>领域知识与经验</li>
</ul>
</li>
<li>系统分析与设计<ul>
<li>UML语言与模型</li>
<li>分析模式</li>
<li>设计模式，领域驱动</li>
<li>系统分析文档格式</li>
<li>系统设计文档格式</li>
<li>功能性需求与非功能性需求</li>
</ul>
</li>
<li>数据与系统<ul>
<li>数据库</li>
<li>可伸缩策略，扩展策略，备份，容灾，性能，安全，高可用……</li>
<li>数据设计与范式，SQL/NoSQL，Cache，分布式文件</li>
</ul>
</li>
<li>架构设计<ul>
<li>架构模式，典型互联网公司架构演进历史</li>
<li>架构原则，常用策略</li>
<li>架构设计方法</li>
<li>非功能性理解<ul>
<li>扩展性</li>
<li>伸缩性</li>
<li>稳定性</li>
<li>一致性</li>
<li>性能</li>
<li>吞吐量</li>
</ul>
</li>
<li>容量预测与规划</li>
<li>架构体系与相关技术</li>
</ul>
</li>
<li>过程与管理<ul>
<li>分析过程</li>
<li>研发过程</li>
<li>评审过程</li>
<li>测试过程</li>
<li>发布过程</li>
<li>回滚过程</li>
<li>文档管理</li>
<li>知识管理</li>
<li>项目管理</li>
</ul>
</li>
</ul>
<p>以上其实就是一份从业基础知识清单，你可以按图索骥，阅读相关书籍。</p>
<h2 id="第二阶段-顺着一个Topic钻进去，锻炼自己的预研能力"><a href="#第二阶段-顺着一个Topic钻进去，锻炼自己的预研能力" class="headerlink" title="第二阶段 顺着一个Topic钻进去，锻炼自己的预研能力"></a>第二阶段 顺着一个Topic钻进去，锻炼自己的预研能力</h2><p>无论公司业务还是自己喜欢做的事，都可以抽象出通用性课题，然后以做论文的方式杀进去。<strong>这个事情得反复操练，有意识操练。</strong></p>
<p>做事方式为：</p>
<ol>
<li>抽象出 Topic——如分布式锁，分布式并行计算引擎，防CSRF的FormToken自动生成框架，定时任务管理与调度平台，分布式跟踪，等等</li>
<li>向功课好的学生学习——有针对性地深入了解业界其他公司是如何分析问题和解决问题的，汇总各种方案，站在巨人的肩膀上</li>
<li>分析特定应用场景，技术选型</li>
<li>兼顾高可用性和可伸缩，做设计评审</li>
<li>做测试自证靠谱，梳理知识点，开技术分享会</li>
<li>上线商用，总结经验教训，开经验分享会</li>
</ol>
<p>其中一个重点是汇总和分享。05年时，应电信级统一消息业务需要，我去研究了 SIP 协议，做了各种试验，分析报文，写了一系列的幻灯片，做了公开分享，一时间还颇受欢迎：</p>
<ol>
<li>SIP_to_Freshman_by_zhengyun.ppt</li>
<li>SIP之穿越NAT_by_zhengyun.ppt</li>
<li>SIP体系架构讲义及消息交互演示_by_zhengyun.ppt</li>
<li>SIP多方会话消息之实例讲解_by_zhengyun.ppt</li>
<li>SIP安全框架之认证[NTLM和Kerberos]_by_zhengyun.ppt</li>
<li>SIP消息之逐项讲解_by_zhengyun.ppt</li>
</ol>
<p>为什么要写出来、讲出来呢？因为有一个学习金字塔理论，如下图所示：</p>
<p><img src="http://img.uprogrammer.cn/static/images/xuexijinzita.png" alt="学习金字塔"></p>
<p>我们读过的事情能够记住学习内容的10%，<br>我们听过的事情能够记住20%，<br>我们看过的事情能够记住30%，<br>我们听过和看过的事情能够记住50%——如看影像/看展览/看演示/现场观摩，<br>我们说过的事情能够记住70%——如参与讨论/发言，<br><strong>我们说过和做过的事情能够记住90%——如做报告，给别人讲，亲身体验，动手做。</strong></p>
<p>这也就是我在《<a href="http://www.cnblogs.com/zhengyun_ustc/p/rightThings.html" target="_blank" rel="noopener">窝窝研发过去几年做对了哪些事</a>》中阐述的管理方法：我们从入职之后就有意识地训练大家，让大家能够公开陈述、清晰表达。所以，试用期内，新人必须做一次技术分享和一次技术评审，面对各方的 challenge；预研的中间和结尾都要有分享会；平时也要定期组织技术讲座。</p>
<h2 id="第三阶段-疯狂回答技术问题"><a href="#第三阶段-疯狂回答技术问题" class="headerlink" title="第三阶段 疯狂回答技术问题"></a>第三阶段 疯狂回答技术问题</h2><p>知识体系慢慢构建，与业务相关的抽象 Topic 也在探索中。但这还不够。因为你亲身接触到的世界太小，可能不足以构成挑战，你可能意识不到自己缺多少知识和技能，不利于你分析问题、提出问题和解决问题的能力培养。</p>
<p>所以，要主动出击：疯狂回答问题。</p>
<p>我曾经在入行的头几年里几乎把我关注的垂直领域（包括语言领域和业务领域）里的所有问题都回答了一遍。我对外宣扬知无不言言无不尽，放出邮件地址和 MSN（那时候 MSN 很高大上），很多网友都会发邮件或者加我好友，问各种开发疑难问题，平均每天都有几个，然后我把解决问题的过程写成微软 KB（KnowledgeBase） 文体发表在我的博客上。</p>
<p>你想想看，工作中的问题你平均每隔几天才能遇到一个，而这么做，每天你都会遇到几个乃至于十几个，第一让你脑力激荡，第二接触到更多新知。05年到06年期间，我因工作需要学习了 JavaME（或古老的称呼 J2ME），早年间 Symbian 手机上的客户端开发。那段时间我天天扫中文论坛的帖子，力求回答所有问题，尤其是那些 BUG 或故障。对于那些暂时没有人解决的，如流媒体实时播放，如仿 OperaMini 二级菜单界面，都上下求索，最后放出思路以及源码。</p>
<p>同时，我经常整理常见问题，梳理成册并发布。譬如我整理过的 J2ME 疑难问题：</p>
<ol>
<li>[J2ME Q&amp;A]真机报告MontyThread -n的错误之解释</li>
<li>[J2MEQ&amp;A]WTK初始化WMAClient报错XXX has no IP address的解释</li>
<li>[J2ME Q&amp;A]untrusted domain is not configured问题回应</li>
<li>[J2ME]“Cannot open socket for LIME events”错误解决</li>
</ol>
<p>几个月后，我成为 J2ME 中文论坛超级版主。通过这个历程，我想告诉大家，回答网友问题，技巧得当的话，比如别老是重复回答新手问题，试着攻克那些疑难问题，或者离奇故障，绝对不会浪费你的时间。为什么？</p>
<p>因为你要信奉：</p>
<blockquote>
<p><strong>你学过的每一样东西，你遭受的每一次苦难，都会在你一生中的某个时候派上用场。</strong><br>——佩内洛普·菲兹杰拉德 《离岸》</p>
<p>Everything that you’ve learnt and all the hardships you’ve suffered will all come in handy at some point in your life.</p>
</blockquote>
<h2 id="第四阶段-RCA-总结"><a href="#第四阶段-RCA-总结" class="headerlink" title="第四阶段 RCA/总结"></a>第四阶段 RCA/总结</h2><p>现在是你把经验教训变为财富的时刻了。</p>
<p>什么是好的技术 Leader？</p>
<p>随便一个业务需求或业务场景讲出来，你立刻把它抽象为几个模块/系统/Topic，然后侃侃而谈，业界都是怎么解决的，我们以前又是怎么分析怎么解决的，现在咱们这种情况下应该如何设计，可能会遇到什么问题，我们应该做哪些预防设计，blabla。</p>
<p>怎么做到这一点？</p>
<p>第一，写 RCA 报告。我以前说过，『窝窝从 2011 年开始，一直坚持每错必查、错了又错就整改、每错必写，用身体力行告诉每一个新员工直面错误、公开技术细节、分享给所有人，长此以往，每一次事故和线上漏测都会变为我们的财富。这就是我们的 RCA（Root Cause Analysis）制度，截止到目前已经收集整理了近两百个详尽的 RCA 报告。』</p>
<p>RCA 报告格式为：</p>
<ol>
<li>背景知识（Optional）</li>
<li>问题现象</li>
<li>影响范围</li>
<li>问题原因</li>
<li>问题分析过程（Optional）</li>
<li>解决办法</li>
<li>后续处理措施：如线上脏数据如何修复，如对用户造成的影响如何弥补等（Optional）</li>
<li>经验教训</li>
<li>RCA类型：如代码问题、实施问题、配置问题、设计问题、测试问题</li>
</ol>
<p>这样，作为一名合格的老兵，你见过了足够多的血，并且把它们变成了你的人生财富。</p>
<p>第二，写总结。话说，要经常拉清单。侃侃而谈得有资料，这些都得是你自己写才能印象深刻，关键时刻想得起来。</p>
<p>好了，这就是我告诉面试者的高手炼成四个阶段。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://linfuyan.com/android-or-java-style-guide-and-best-practice/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Aaron">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="阿阿燃">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/android-or-java-style-guide-and-best-practice/" itemprop="url">Android (Java) 编码惯例及最佳实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-11-12T11:45:07+08:00">
                2015-11-12
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2015-11-12T14:55:50+08:00">
                2015-11-12
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/" itemprop="url" rel="index">
                    <span itemprop="name">开发技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发技术/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1-声明-Declaration"><a href="#1-声明-Declaration" class="headerlink" title="1. 声明(Declaration)"></a>1. 声明(Declaration)</h1><h2 id="1-1-每行声明变量的数量-Number-Per-Line"><a href="#1-1-每行声明变量的数量-Number-Per-Line" class="headerlink" title="1.1 每行声明变量的数量(Number Per Line)"></a>1.1 每行声明变量的数量(Number Per Line)</h2><p>推荐一行一个声明，因为这样以利于写注释。亦即，</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> level; <span class="comment">// indentation level      </span></span><br><span class="line"><span class="keyword">int</span> <span class="built_in">size</span>; <span class="comment">// size of table</span></span><br></pre></td></tr></table></figure>
<p>要优于，</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> level, <span class="built_in">size</span>;</span><br></pre></td></tr></table></figure>
<p>不要将不同类型变量的声明放在同一行，例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> foo, fooarry[]; <span class="comment">// WRONG!</span></span><br></pre></td></tr></table></figure>
<p>注意：上面的例子中，在类型和标识之间放了一个空格，另一种被允许的替代方法是多行变量注释的对齐：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> level;                <span class="comment">// indentation level</span></span><br><span class="line"><span class="built_in">int</span> <span class="built_in">size</span>;                 <span class="comment">// size of table  </span></span><br><span class="line"><span class="keyword">Object</span> currentEntry;      <span class="comment">// currently selected table entry</span></span><br></pre></td></tr></table></figure>
<h2 id="1-2-初始化-Initialization"><a href="#1-2-初始化-Initialization" class="headerlink" title="1.2 初始化(Initialization)"></a>1.2 初始化(Initialization)</h2><p>尽量在声明局部变量的同时进行初始化。唯一 不这么做理由是变量的初始值依赖于某些先前发生的计算。</p>
<h2 id="1-3-布局-Placement"><a href="#1-3-布局-Placement" class="headerlink" title="1.3 布局(Placement)"></a>1.3 布局(Placement)</h2><p>建议只在代码块的开始处声明变量(一个块可以指任何被包含在大括号“{”和“}”中间的代码，也可以是逻辑上分块的代码)。通常不要在首次用于该变量时才声明之，这会把注意力不集中的程序员搞糊涂，同时会妨碍代码在该作用域内的可移植性。    </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> int1 = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        <span class="keyword">int</span> int2 = <span class="number">0</span>;</span><br><span class="line">        …</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该规则的一个例外是for循环的索引变量</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (int <span class="built_in">i</span> = <span class="number">0</span>; <span class="built_in">i</span> &lt; maxLoops; <span class="built_in">i</span>++) &#123; … &#125;</span><br></pre></td></tr></table></figure>
<p>避免声明的局部变量覆盖上一级声明的变量。例如，不要在内部代码块中声明相同的变量名：</p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="keyword">count</span>;</span><br><span class="line">…</span><br><span class="line">myMethod() &#123;</span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        <span class="keyword">int</span> <span class="keyword">count</span> = <span class="number">0</span>;    <span class="comment">// AVOID!</span></span><br><span class="line">        …</span><br><span class="line">    &#125;</span><br><span class="line">    …</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-4-类和接口的声明-Class-and-Interface-Declarations"><a href="#1-4-类和接口的声明-Class-and-Interface-Declarations" class="headerlink" title="1.4 类和接口的声明(Class and Interface Declarations)"></a>1.4 类和接口的声明(Class and Interface Declarations)</h2><p>当编写类和接口时，应该遵守以下格式规则：</p>
<ol>
<li>在方法名与其参数列表之前的左括号“(”间不要有空格。</li>
<li>左大括号“{”位于声明语句同行的末尾。</li>
<li>右大括号“}”另起一行，与相应的声明语句对齐，除非是一个空语句，“}”应紧跟在“{”之后。   </li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span> <span class="keyword">extends</span> <span class="title">Object</span> </span>&#123;</span><br><span class="line">    int ivar1;</span><br><span class="line">    int ivar2;</span><br><span class="line"></span><br><span class="line">    <span class="type">Sample</span>(int i, int j) &#123;</span><br><span class="line">        ivar1 = i;</span><br><span class="line">        ivar2 = j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    int emptyMethod() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    …</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="2-注释-Comments"><a href="#2-注释-Comments" class="headerlink" title="2. 注释(Comments)"></a>2. 注释(Comments)</h1><p>Java 程序有两类注释：实现注释( implementation comments )和文档注释( document comments )。实现注释是那些在 C++ 中见过的，使用 <code>/*…*/</code> 和 <code>//</code> 界定的注释。文档注释(被称为“doc comments”)是 Java 独有的，并由 <code>/**…*/</code> 界定。文档注释可以通过 javadoc 工具转换成 HTML 文件。</p>
<p>实现注释用以注释代码或或者实现细节。文档注释从实现自由( implemtentation-free )的角度描述代码的规范。它可以被那些手头没有源码的开发人员读懂。</p>
<p>注释应被用来给出代码的总括，并提供代码自身没有提供的附加信息。注释应该仅包含与阅读和理解程序有关的信息。例如，相应的包如何被建立或位于哪个目录下之类的信息不应包括在注释中。</p>
<p>在注释里，对设计决策中重要的或者不是显而易见的地方进行说明是可以的，但应避免提供代码中已清晰表达出来的重复信息，多余的注释很容易过时。通常应避免那些代码更新就可能过时的注释。</p>
<p>注意：频繁的注释有时反映出代码的低质量。当你觉得被迫要加注释的时候，考虑一下重写代码使其更清晰。</p>
<p>注释不应写在用星号或字符画出来的大框里。注释不应包括诸如制表符和回退符之类的特殊字符。</p>
<h2 id="2-1-实现注释的格式-Implementation-Comment-Formats"><a href="#2-1-实现注释的格式-Implementation-Comment-Formats" class="headerlink" title="2.1 实现注释的格式(Implementation Comment Formats)"></a>2.1 实现注释的格式(Implementation Comment Formats)</h2><p>程序可以有4种实现注释的风格：块(Block)，单行(single-line)，尾端(trailing)和行末(end-of-line)。</p>
<h3 id="2-1-1-块注释"><a href="#2-1-1-块注释" class="headerlink" title="2.1.1 块注释"></a>2.1.1 块注释</h3><p>块注释通常用于提供对文件，方法，数据结构和算法的描述。块注释被置于每个文件的开始处以及每个方法之前。它们也可以被用于其他地方，比如方法的内部。在功能和方法内部的块注释应该和它们所描述的代码具有一样的缩进格式。</p>
<p>块注释之首应该有一个空行，用于把块注释和代码分割开来，比如：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Here is a block comment.</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h3 id="2-1-2-单行注释-Single-Line-Comments"><a href="#2-1-2-单行注释-Single-Line-Comments" class="headerlink" title="2.1.2 单行注释(Single-Line Comments)"></a>2.1.2 单行注释(Single-Line Comments)</h3><p>短注释可以显示一行内，并与其后的代码具有一样的缩进层级。如果一个注释不能在一行内写完，就该块注释(参见“块注释”)。单行注释之前应该有一个空行。以下是一个Java代码中单行注释的例子：</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="comment">(condition)</span> &#123;</span><br><span class="line">    <span class="comment">/* Handle the condition. */</span></span><br><span class="line">    ……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-3-尾端注释-Trailing-Comments"><a href="#2-1-3-尾端注释-Trailing-Comments" class="headerlink" title="2.1.3 尾端注释(Trailing Comments)"></a>2.1.3 尾端注释(Trailing Comments)</h3><p>极短的注释可以与它们所要描述的代码位于同一行，但是应该有足够的空白（至少一个空格）来分开代码和注释。若有多个短注释出现于大段代码中，它们应该具有相同的缩进。</p>
<p>以下是一个Java代码中尾端注释的例子：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (a ==<span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> TRUE;            <span class="comment">/* special case */</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> isPrime(a);      <span class="comment">/* works only for odd a */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-1-4-行末注释-End-Of-Line-Comments"><a href="#2-1-4-行末注释-End-Of-Line-Comments" class="headerlink" title="2.1.4 行末注释(End-Of-Line Comments)"></a>2.1.4 行末注释(End-Of-Line Comments)</h3><p>注释界定符//，可以注释掉整行或者一行中的一部分。它一般不用于连续多行的注释文本；然而，它可以用来注释掉多行的代码段。以下是所有三种风格的例子：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(foo &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// Do a double-filp.</span></span><br><span class="line">    ……</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// Expalin why here.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//if (bar &gt; 1) &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    // Do a triple-flip.</span></span><br><span class="line"><span class="comment">//    ...</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//else &#123;</span></span><br><span class="line"><span class="comment">//    return false;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-2-文档注释-Documentation-Comments"><a href="#2-2-文档注释-Documentation-Comments" class="headerlink" title="2.2 文档注释(Documentation Comments)"></a>2.2 文档注释(Documentation Comments)</h2><p>注意：此处描述的注释格式之范例，参见“ Java 源文件范例”<br>若想了解更多，参见“How to Write Doc Comments for Javadoc”，其中包含了有关文档注释标记的信息(@return，@param，@see)：</p>
<p><a href="http://java.sun.com/javadoc/writingdoccomments/index.html" target="_blank" rel="noopener">http://java.sun.com/javadoc/writingdoccomments/index.html</a></p>
<p>若想了解有关文档注释和 javadoc 的详细资料，参见 javadoc 的主页：</p>
<p><a href="http://java.sun.com/javadoc/index.html" target="_blank" rel="noopener">http://java.sun.com/javadoc/index.html</a></p>
<p>文档注释描述Java的类、接口、构造器、方法，以及字段(field)。每个文档注释都会被置于注释界定符 <code>/**…*/</code> 之中，一个注释对应一个类、接口或成员。该注释应位于声明之前：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The Example class provides …</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> FirstName Lastname (account<span class="doctag">@sohu</span>-inc.com)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123; …</span><br></pre></td></tr></table></figure>
<p>注意：顶层(top-level)的类和接口是不缩进的，而其成员是缩进的。描述类和接口的文档注释的第一行会被置于注释的第一行(/ **)不需要缩进；随后的文档注释每行都缩进1格(使星号纵向对齐)。成员，包括构造函数在内，其文档注释的第一行缩进4格，随后每行都缩进5格。</p>
<p>若你想给出有关类、接口、变量或方法的信息，而这些信息又不适合写在文档中，则可使用实现块注释(见2.1.1)或紧跟在声明后面的单行注释(见2.1.2)。例如，有关一个类实现的细节应放入紧跟在类声明后面的实现块注释中，而不是放在文档注释中。</p>
<p>文档注释不能放在一个方法或构造器的定义块中，因为 Java 会将位于文档注释之后的第一个声明与其相关联。</p>
<h1 id="3-编程实践"><a href="#3-编程实践" class="headerlink" title="3. 编程实践"></a>3. 编程实践</h1><h2 id="3-1-提供对实例以及类变量的访问控制-Providing-Access-to-Instance-and-Class-Variables"><a href="#3-1-提供对实例以及类变量的访问控制-Providing-Access-to-Instance-and-Class-Variables" class="headerlink" title="3.1 提供对实例以及类变量的访问控制(Providing Access to Instance and Class Variables)"></a>3.1 提供对实例以及类变量的访问控制(Providing Access to Instance and Class Variables)</h2><p>若没有足够的理由，不要把实例或类类变量声明为 public。通常，实例变量无需显式的设置(set)和获取(gotten)，通常这作为方法调用的边缘效应(side effect)而产生。</p>
<p>一个具有public实例变量的恰当例子，是类仅作为数据结构，没有行为。亦即，若你要使用一个结构(struct)而非一个类(如果Java支持结构的话)，那么把类的实例变量声明为public是合适的。</p>
<p>Android 变量访问控制：Android 的开发通常允许公共的实例变量。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// <span class="keyword">Common</span> practice <span class="keyword">in</span> Android development.</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> MyClass &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> pulicField;  // <span class="keyword">public</span> field for <span class="keyword">direct</span> <span class="keyword">access</span>.</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-2-引用类变量和类方法-Referring-to-Class-Variables-and-Methods"><a href="#3-2-引用类变量和类方法-Referring-to-Class-Variables-and-Methods" class="headerlink" title="3.2 引用类变量和类方法(Referring to Class Variables and Methods)"></a>3.2 引用类变量和类方法(Referring to Class Variables and Methods)</h2><p>避免用一个对象访问一个类的静态变量和方法。应该用类名替代。例如：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">classMethod</span>();         <span class="comment">// OK</span></span><br><span class="line"><span class="selector-tag">AClass</span><span class="selector-class">.classMethod</span>();   <span class="comment">// OK</span></span><br><span class="line"><span class="selector-tag">anObject</span><span class="selector-class">.classMethod</span>();  <span class="comment">// AVOID!</span></span><br></pre></td></tr></table></figure>
<h2 id="3-3-常量-Constants"><a href="#3-3-常量-Constants" class="headerlink" title="3.3 常量(Constants)"></a>3.3 常量(Constants)</h2><p>位于for循环中作为计数器值的数字常量，除了-1，0和1之外，不应被直接写入代码。</p>
<h2 id="3-4-变量赋值-Variable-Assignments"><a href="#3-4-变量赋值-Variable-Assignments" class="headerlink" title="3.4 变量赋值(Variable Assignments)"></a>3.4 变量赋值(Variable Assignments)</h2><p>避免在一个语句中给多个变量赋相同的值。它很难读懂。例如：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fooBar.fChar = <span class="keyword">barFoo.lchar </span>= ‘c’<span class="comment">;  // AVOID!</span></span><br></pre></td></tr></table></figure>
<p>不要将赋值运算符用在容易与相等关系运算符混淆的地方。例如：</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="comment">(c++ = d++)</span> &#123;    <span class="comment">// AVOID! (Java disallows)</span></span><br><span class="line">    ….</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>应该写成</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">if</span> <span class="comment">((c</span><span class="literal">+</span><span class="literal">+</span> <span class="comment">=</span> <span class="comment">d</span><span class="literal">+</span><span class="literal">+</span><span class="comment">)</span> <span class="comment">!</span> <span class="comment">=</span> <span class="comment">0)</span> <span class="comment">&#123;</span></span><br><span class="line"><span class="comment"></span>    <span class="comment">…</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure>
<p>不要使用内嵌(embedded)赋值运算符试图提高运行时效率，这是编译器的工作。例如：</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d = <span class="comment">(a = b +c)</span> + r; <span class="comment">// AOVID!</span></span><br></pre></td></tr></table></figure>
<p>应该写成</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">a</span> = b + c;</span><br><span class="line"><span class="attribute">d</span> = a + r;</span><br></pre></td></tr></table></figure>
<h2 id="3-5-其它惯例-Miscellaneous-Practices"><a href="#3-5-其它惯例-Miscellaneous-Practices" class="headerlink" title="3.5 其它惯例(Miscellaneous Practices)"></a>3.5 其它惯例(Miscellaneous Practices)</h2><h3 id="3-5-1-圆括号与运算符优先级-Parentheses-and-Operator-Precedence"><a href="#3-5-1-圆括号与运算符优先级-Parentheses-and-Operator-Precedence" class="headerlink" title="3.5.1 圆括号与运算符优先级(Parentheses and Operator Precedence)"></a>3.5.1 圆括号与运算符优先级(Parentheses and Operator Precedence)</h3><p>一般而言，在含有多种运算符的表达式中使用括号来避免运算符优先级问题，是个好方法。即便运算符的优先级对你而言可能很清楚，但对其他人未必如此。你不能假设别的程序员和你一样清楚运算符的优先级。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="selector-tag">a</span> == <span class="selector-tag">b</span> &amp;&amp; c ==d)     <span class="comment">// AVOID!</span></span><br><span class="line"><span class="keyword">if</span> ((<span class="selector-tag">a</span> == b) &amp;&amp; (c == d))  <span class="comment">// RIGHT</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-2-返回值-Returning-Values"><a href="#3-5-2-返回值-Returning-Values" class="headerlink" title="3.5.2 返回值(Returning Values)"></a>3.5.2 返回值(Returning Values)</h3><p>设法让你的程序结构符合目的。例如：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (booleanException) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>应该代之以如下方法：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> booleanException;</span><br></pre></td></tr></table></figure>
<p>类似地：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> y;</span><br></pre></td></tr></table></figure>
<p>应该写为：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (condition ? x : <span class="type">y</span>);</span><br></pre></td></tr></table></figure>
<h3 id="3-5-3-条件运算符“-”前的表达式-Expressions-before-“-”-in-the-Conditional-Operator"><a href="#3-5-3-条件运算符“-”前的表达式-Expressions-before-“-”-in-the-Conditional-Operator" class="headerlink" title="3.5.3 条件运算符“?”前的表达式 (Expressions before “?” in the Conditional Operator)"></a>3.5.3 条件运算符“?”前的表达式 <code>(Expressions before “?” in the Conditional Operator)</code></h3><p>如果一个包含二元运算符表达式出现在三元运算符“<code>? :</code>”之前，那么应该给表达式添上一对圆括号。例如：</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">x</span> &gt;= <span class="number">0</span>) ? <span class="keyword">x</span> : -<span class="keyword">x</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-5-4-特殊注释-Special-Comments"><a href="#3-5-4-特殊注释-Special-Comments" class="headerlink" title="3.5.4 特殊注释(Special Comments)"></a>3.5.4 特殊注释(Special Comments)</h3><p>使用 TODO 来注释一个临时的或者未完成的解决方案。TODO 必须包含详细的信息，例如，需要做什么，打算怎么做，为什么以后才做，等。要发布到生产环境的代码尽量减少 TODO。</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// TODO: Change this <span class="built_in">to</span> use <span class="keyword">a</span> flag instead <span class="keyword">of</span> <span class="keyword">a</span> <span class="built_in">constant</span>.</span><br></pre></td></tr></table></figure>
<p>如果有可能，尽量包含具体的开发者帐号，以及具体的修正日期。</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// TODO(tom, Fix <span class="keyword">by</span> Nov <span class="number">2005</span>): Change this <span class="built_in">to</span> use <span class="keyword">a</span> flag.</span><br></pre></td></tr></table></figure>
<h2 id="3-6-所有对象的共有方法-Methods-Common-to-All-Objects"><a href="#3-6-所有对象的共有方法-Methods-Common-to-All-Objects" class="headerlink" title="3.6 所有对象的共有方法(Methods Common to All Objects)"></a>3.6 所有对象的共有方法(Methods Common to All Objects)</h2><h3 id="3-6-1-覆盖equals时请遵守通用约定"><a href="#3-6-1-覆盖equals时请遵守通用约定" class="headerlink" title="3.6.1 覆盖equals时请遵守通用约定"></a>3.6.1 覆盖equals时请遵守通用约定</h3><p>Item 8: Obey the general contract when overriding equals.</p>
<p>重写 equals 方法看起来很简单，实际上非常容易犯错误。在多数情况下我们不推荐重写equals方法。如果确实有必要，这里再强调一下 Object.equals 的约定：</p>
<ul>
<li>自反：对于任意 non-null 的引用值x，x.equals(x) 必须返回true。</li>
<li>对称：对于任意的 non-null 的值x和y，x.equals(y) 和 y.equals(x) 必须返回相同的值。</li>
<li>传递：对于任意 non-null 的值，x，y，z，如果 x.equals(y) 返回true以及 y.equals(z) 返回true，那么 x.equals(z) 也必须返回 true。</li>
<li>一致：如果 equals 实现中的辅助信息没有改变，对于任意的x和y，对  x.equals(y) 必须返回相同的值。</li>
</ul>
<p>对于所有的 non-null 的 x，x.equals(null) 必须返回false。</p>
<h3 id="3-6-2-覆盖equals时总要覆盖hashCode"><a href="#3-6-2-覆盖equals时总要覆盖hashCode" class="headerlink" title="3.6.2 覆盖equals时总要覆盖hashCode"></a>3.6.2 覆盖equals时总要覆盖hashCode</h3><p>Item 9: Always override hashCode when you override equals.</p>
<p>对于每一个 equals 方法被重写的类，你必须重写 hashCode 方法。请仔细阅读 javadoc 中关于 Object.equals 的描述。相等的对象必须有相等的 hash 值。</p>
<p>这里是一个错误的例子：</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> class PhoneNumber &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">short</span> areaCode;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">short</span> prefix;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">short</span> lineNumber;</span><br><span class="line">        </span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">boolean</span> equals(<span class="keyword">Object</span> o) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> PhoneNumber)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        PhoneNumber pn = (PhoneNumber)o;</span><br><span class="line">        <span class="keyword">return</span> pn.lineNumber == lineNumber</span><br><span class="line">                         &amp;&amp; pn.prefix  == prefix</span><br><span class="line">                         &amp;&amp; pn.areaCode  == areaCode;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// Broken - no hashCode method!</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Map&lt;PhoneNumber, <span class="keyword">String</span>&gt; m = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;PhoneNumber, <span class="keyword">String</span>&gt;();</span><br><span class="line">m.put(<span class="keyword">new</span> PhoneNumber(<span class="number">707</span>, <span class="number">867</span>, <span class="number">5309</span>), <span class="string">"Jenny"</span>);</span><br><span class="line"><span class="comment">// null is returned instead of "Jenny"</span></span><br><span class="line">m.<span class="built_in">get</span>(<span class="keyword">new</span> PhoneNumber(<span class="number">707</span>, <span class="number">867</span>, <span class="number">5309</span>));</span><br></pre></td></tr></table></figure>
<h2 id="3-7-泛型-Generics"><a href="#3-7-泛型-Generics" class="headerlink" title="3.7 泛型(Generics)"></a>3.7 泛型(Generics)</h2><h3 id="3-7-1-请不要在新代码中使用原生态类型"><a href="#3-7-1-请不要在新代码中使用原生态类型" class="headerlink" title="3.7.1 请不要在新代码中使用原生态类型"></a>3.7.1 请不要在新代码中使用原生态类型</h3><p>Item 23: Don’t use raw types in new code.</p>
<p>从1.5版本开始，java提供了泛型机制来保证类型的安全。除非为了向后兼容，不允许使用原生态类型，像List（而不是 <code>List&lt;String&gt;</code>)。</p>
<p>下面这段代码就很容易出问题：</p>
<figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Now a raw collection type - don't do this!</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * My stamp collection. Contains only Stamp instances.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">private final <span class="type">Collection</span> stamps = ... ;</span><br><span class="line">        </span><br><span class="line"><span class="comment">// Erroneous insertion of coin into stamp collection</span></span><br><span class="line">stamps.add(<span class="function"><span class="keyword">new</span> <span class="title">Coin</span>( ... ));</span></span><br><span class="line"><span class="function">        </span></span><br><span class="line"><span class="function"><span class="comment">// Now a raw iterator type - don't do this!</span></span></span><br><span class="line"><span class="function"><span class="title">for</span> (<span class="type">Iterator</span> i = stamps.iterator(); <span class="title">i</span>.<span class="title">hasNext</span>(); ) &#123;</span></span><br><span class="line"><span class="function">    <span class="title">Stamp</span> <span class="title">s</span> = (<span class="type">Stamp</span>) <span class="title">i</span>.<span class="title">next</span>(); <span class="comment">// Throws ClassCastException</span></span></span><br><span class="line"><span class="function">    ... <span class="comment">// Do something with the stamp</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>使用泛型能够很好地解决这个问题：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Parameterized collection type - typesafe</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Collection&lt;Stamp&gt; stamps = ... ;</span><br><span class="line">        </span><br><span class="line"><span class="comment">// for-each loop over a parameterized collection - typesafe</span></span><br><span class="line"><span class="keyword">for</span> (Stamp <span class="string">s :</span> stamps) &#123; <span class="comment">// No cast</span></span><br><span class="line">    ... <span class="comment">// Do something with the stamp</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-7-2-消除非受检警告"><a href="#3-7-2-消除非受检警告" class="headerlink" title="3.7.2 消除非受检警告"></a>3.7.2 消除非受检警告</h3><p>Item 24: Elimate unchecked warnings.</p>
<p>在使用泛型编程的时候，我们经常会看到编译警告：非受检的类型转换警告，非受检的函数调用警告等等。很多非受检的警告是非常容易消除的，例如：</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Set</span>&lt;Lark&gt; exaltation <span class="comment">= new HashSet()</span>;</span><br></pre></td></tr></table></figure>
<p>编译器会抛出警告：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Venery.<span class="string">java:</span><span class="number">4</span>: <span class="string">warning:</span> [unchecked] unchecked conversion</span><br><span class="line"><span class="string">found  :</span> HashSet, <span class="string">required:</span> Set&lt;Lark&gt;</span><br><span class="line">    Set&lt;Lark&gt; exaltation = <span class="keyword">new</span> HashSet();</span><br><span class="line">                 ^</span><br></pre></td></tr></table></figure>
<p>我们很容易消除这个警告：</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Set</span>&lt;Lark&gt; exaltation <span class="comment">= new HashSet&lt;Lark&gt;()</span>;</span><br></pre></td></tr></table></figure>
<p>关于消除非受检的警告，有如下基本规则：</p>
<ul>
<li>尽可能地消除每个非受检的警告。</li>
<li>如果无法消除，必须能够证明这个警告不会引起类型安全问题，同时通过 <code>@SuppressWarnings(&quot;unchecked&quot;)</code> 来消除警告。</li>
<li>SuppressWarning必须作用在尽可能小的范围。</li>
<li>每一次使用 <code>@SuppressWarnings(&quot;unchecked&quot;)</code> 时，必须注释说明为什么这样做是安全的。</li>
</ul>
<h2 id="3-8-枚举和注解-Enums-and-Annotations"><a href="#3-8-枚举和注解-Enums-and-Annotations" class="headerlink" title="3.8 枚举和注解(Enums and Annotations)"></a>3.8 枚举和注解(Enums and Annotations)</h2><h3 id="3-8-1-用-enum-代替-int-常量"><a href="#3-8-1-用-enum-代替-int-常量" class="headerlink" title="3.8.1 用 enum 代替 int 常量"></a>3.8.1 用 enum 代替 int 常量</h3><p>Item 30: Use enums instead of int constants.</p>
<p>下面的代码利用了一种叫 int enum pattern 的技术，它有很多问题。它不能保证类型安全；它不能很好地转换为可读的字符串；如果数值变了的话，使用它的代码必须重新编译（严重！）。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// The int enum pattern - severely deficient!</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ORANGE_NAVEL = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ORANGE_TEMPLE = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ORANGE_BLOOD = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>我们应该用enum来实现上面的代码：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">enum</span> <span class="title">Orange</span> &#123; <span class="title">NAVEL</span>, <span class="title">TEMPLE</span>, <span class="title">BLOOD</span> &#125;</span></span><br></pre></td></tr></table></figure>
<p>注意：出于效率考虑，Android 的开发允许使用 int 常量，但是使用时要非常小心。</p>
<h3 id="8-8-2-用实例域代替序数"><a href="#8-8-2-用实例域代替序数" class="headerlink" title="8.8.2 用实例域代替序数"></a>8.8.2 用实例域代替序数</h3><p>Item 31: Use instance fields instead of ordinals.</p>
<p>所有的枚举类型都有一个ordinal方法，它能够返回每个枚举常量在类型中的位置。有时候，你可能会想从这个方法中直接得到一个整数值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Abuse of ordinal to derive an associated value - DON'T DO THIS</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Ensemble &#123;</span><br><span class="line">    SOLO, SEXTET, DUET, TRIO, QUARTET, QUINTET, SEPTET, OCTET, NONET, DECTET;</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numberOfMusicians</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> ordinal() + <span class="number">1</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不要从枚举的序数中得到一个整数值，如果需要，请创建一个整数字段：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">enum</span> <span class="title">Ensemble</span> &#123;</span></span><br><span class="line">    SOLO(<span class="number">1</span>), DUET(<span class="number">2</span>), TRIO(<span class="number">3</span>), QUARTET(<span class="number">4</span>), QUINTET(<span class="number">5</span>),</span><br><span class="line">    SEXTET(<span class="number">6</span>), SEPTET(<span class="number">7</span>), OCTET(<span class="number">8</span>), DOUBLE_QUARTET(<span class="number">8</span>),</span><br><span class="line">    NONET(<span class="number">9</span>), DECTET(<span class="number">10</span>), TRIPLE_QUARTET(<span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> final int numberOfMusicians;</span><br><span class="line">    Ensemble(int size) &#123; this.numberOfMusicians = size; &#125;</span><br><span class="line">    public int numberOfMusicians() &#123; <span class="keyword">return</span> numberOfMusicians; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-8-3-坚持使用Override注解"><a href="#3-8-3-坚持使用Override注解" class="headerlink" title="3.8.3 坚持使用Override注解"></a>3.8.3 坚持使用Override注解</h3><p>Item 36: Consistently use the Override annotation.</p>
<p>你能发现下面代码的错误吗？</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class Bigram &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="built_in">char</span> first;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="built_in">char</span> <span class="built_in">second</span>;</span><br><span class="line">    <span class="keyword">public</span> Bigram(<span class="built_in">char</span> first, <span class="built_in">char</span> <span class="built_in">second</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.first = first;</span><br><span class="line">        <span class="keyword">this</span>.<span class="built_in">second</span> = <span class="built_in">second</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">boolean</span> equals(Bigram b) &#123;</span><br><span class="line">        <span class="keyword">return</span> b.first == first &amp;&amp; b.<span class="built_in">second</span> == <span class="built_in">second</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> hashCode() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">31</span> * first + <span class="built_in">second</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们加入了 <code>@Override</code> 的标注，编译器就能告诉我们错误了。</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">Override</span> <span class="keyword">public</span> boolean <span class="keyword">equals</span>(Bigram b) <span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    return b.first == first &amp;&amp; b.second == second;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line">        </span><br><span class="line">Bigram.java:<span class="number">10</span>: <span class="function"><span class="keyword">method</span> <span class="title">does</span> <span class="title">not</span> <span class="title">override</span> <span class="title">or</span> <span class="title">implement</span> <span class="title">a</span> <span class="title">method</span></span></span><br><span class="line"><span class="function">        <span class="title">from</span> <span class="title">a</span> <span class="title">supertype</span></span></span><br><span class="line"><span class="function">@<span class="title">Override</span> <span class="title">public</span> <span class="title">boolean</span> <span class="title">equals</span><span class="params">(Bigram b)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment">^</span></span></span><br></pre></td></tr></table></figure>
<h2 id="3-9-方法-Methods"><a href="#3-9-方法-Methods" class="headerlink" title="3.9 方法 (Methods)"></a>3.9 方法 (Methods)</h2><h3 id="3-9-1-检查参数的有效性"><a href="#3-9-1-检查参数的有效性" class="headerlink" title="3.9.1 检查参数的有效性"></a>3.9.1 检查参数的有效性</h3><p>Item 38: Check parameters for validaity.</p>
<p>大多数的方法对于传入参数的值有限制，例如，通常来说索引值必须是非负的，对象应用必须是非空的。一条总的规则是，在错误发生之前必须尽早地发现它、处理它。</p>
<p>如果我们能在方法执行主要逻辑之前检查到错误的参数，我们就能够及时退出，同时抛出一个合适的一场。如果错误的参数进入函数的主要执行逻辑，方法就可能抛出一个奇怪的异常。在更坏的情况下，方法可能成功返回，但是中间出现一些不可预知的结果。</p>
<p>对于公共方法，用 <code>@throws</code> 来注释异常。比如，这些异常可能是 <code>IllegalArgumentException</code> 或者是 <code>NullPointerException</code>。例如：</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> m the modulus, which must be positive</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> this mod m</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> ArithmeticException if m is less than or equal to 0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">BigInteger <span class="title">mod</span><span class="params">(BigInteger m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (m.signum() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ArithmeticException(<span class="string">"Modulus &lt;= 0: "</span> + m);</span><br><span class="line">    &#125;</span><br><span class="line">    ... <span class="comment">// Do the computation</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-10-异常-Exceptions"><a href="#3-10-异常-Exceptions" class="headerlink" title="3.10 异常(Exceptions)"></a>3.10 异常(Exceptions)</h2><h3 id="3-10-1-只针对异常的情况才使用异常"><a href="#3-10-1-只针对异常的情况才使用异常" class="headerlink" title="3.10.1 只针对异常的情况才使用异常"></a>3.10.1 只针对异常的情况才使用异常</h3><p>Item 57: Use exceptions only for exceptional conditions.</p>
<p>异常，只应该被应用于异常的情况；不能被用于正常的控制流程。这一点在很多时候会被误用，下面是一个极端的例子：</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// <span class="type">Horrible</span> abuse <span class="keyword">of</span> exceptions. <span class="type">Don</span>'t ever <span class="keyword">do</span> this!</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">        <span class="built_in">range</span>[i++].climb();</span><br><span class="line">    &#125; catch(<span class="type">ArrayIndexOutOfBoundsException</span> e) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-10-2-对可恢复的情况使用受检异常，对编程错误使用运行时异常"><a href="#3-10-2-对可恢复的情况使用受检异常，对编程错误使用运行时异常" class="headerlink" title="3.10.2 对可恢复的情况使用受检异常，对编程错误使用运行时异常"></a>3.10.2 对可恢复的情况使用受检异常，对编程错误使用运行时异常</h3><p>Item 58: Use checked exceptions for recoverable conditions and runtime exceptions for programming errors.</p>
<p>受检异常在调用者能够合适处理并恢复程序执行的情况下使用。运行时异常用来表明程序自身的错误，大多数的运行时异常都是因为调用者违反了函数的预设条件。</p>
<p>应用程序所有非受检的异常应该派生自 RuntimeException ，作为惯例，Error 通常只被 JVM 使用。</p>
<h3 id="3-10-3-抛出与抽象相对应的异常"><a href="#3-10-3-抛出与抽象相对应的异常" class="headerlink" title="3.10.3 抛出与抽象相对应的异常"></a>3.10.3 抛出与抽象相对应的异常</h3><p>Item 61: Throw exceptions appropriate to the abstraction.</p>
<p>抛出与当前方法明显无关的异常会让人十分迷惑，而且会暴露出实现的细节。这种情况通常是因为高一级的方法直接抛出底层调用的异常引起的。我们采用异常转换的方法来避免这一种情况。也就是说，高一级的方法应该捕获底层调用的异常，抛出一个更高抽象的异常。例如，下面是一段 AbstractSequentialList 实现代码，它需要实现 <code>List&lt;E&gt;#get</code> 方法。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the element at the specified position in this list.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IndexOutOfBoundsException if the index is out of range</span></span><br><span class="line"><span class="comment"> * (&#123;<span class="doctag">@code</span> index &lt; 0 || index &gt;= size()&#125;).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    ListIterator&lt;E&gt; i = listIterator(index);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="function"><span class="keyword">return</span> i.<span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(NoSuchElementException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(<span class="string">"Index: "</span> + index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>需要注意的是，不要滥用了异常转换。</p>
<h3 id="3-10-4-每个方法抛出的异常都要有文档"><a href="#3-10-4-每个方法抛出的异常都要有文档" class="headerlink" title="3.10.4 每个方法抛出的异常都要有文档"></a>3.10.4 每个方法抛出的异常都要有文档</h3><p>Item 62: Document all exceptions thrown by each method.</p>
<p>关于异常的文档有以下要求：</p>
<p>必须单独地声明每个受检异常，同时准确地用 <code>@throws</code> 来说明异常条件。</p>
<p>用 Javadoc 的 <code>@throws</code> 来表明非受检的异常；但是不要用throws关键字在方法的声明中包括非受检的异常。</p>
<p>如果一个异常会被同一个类的很多方法抛出，在类的注释中表明这个异常是可以接受的。但是通常不推荐这么做。</p>
<h3 id="3-10-5-不要忽略异常"><a href="#3-10-5-不要忽略异常" class="headerlink" title="3.10.5 不要忽略异常"></a>3.10.5 不要忽略异常</h3><p>Item 65: Don’t ignore exceptions.</p>
<p>我们不允许像下面的代码一样忽略异常：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setServerPort</span>(<span class="params">String <span class="keyword">value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        serverPort = Integer.parseInt(<span class="keyword">value</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>至少，在 catch 语句里，应该有注释说明为什么忽略异常是合适的。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** If value is not a valid number, original port number is used. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setServerPort</span>(<span class="params">String <span class="keyword">value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        serverPort = Integer.parseInt(<span class="keyword">value</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">        <span class="comment">// Method is documented to just ignore invalid user input.</span></span><br><span class="line">        <span class="comment">// serverPort will just be unchanged.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-10-6-不要一次捕获所有异常"><a href="#3-10-6-不要一次捕获所有异常" class="headerlink" title="3.10.6 不要一次捕获所有异常"></a>3.10.6 不要一次捕获所有异常</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">try</span> &#123;</span><br><span class="line">    <span class="selector-tag">someComplicatedIOFunction</span>();        <span class="comment">// may throw IOException </span></span><br><span class="line">    <span class="selector-tag">someComplicatedParsingFunction</span>();   <span class="comment">// may throw ParsingException </span></span><br><span class="line">    <span class="selector-tag">someComplicatedSecurityFunction</span>();  <span class="comment">// may throw SecurityException </span></span><br><span class="line">    <span class="comment">// phew, made it all the way </span></span><br><span class="line">    &#125; <span class="selector-tag">catch</span> (Exception e) &#123;                 <span class="comment">// I'll just catch all exceptions </span></span><br><span class="line">    <span class="selector-tag">handleError</span>();                      <span class="comment">// with one generic handler!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在绝大多数情况下，捕获 Exception 或者是 Throwable 都是不对的。这个非常危险，你可能会捕获一些没有想到的异常，或者是稍后加入的异常。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="http://source.android.com/source/code-style.html" target="_blank" rel="noopener">Code Style Guidelines for Contributors</a></p>
<p><a href="http://linfuyan.com/google-java-style-guide/">Google Java 编程风格指南</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Aaron</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">93</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">233</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/linfuyan" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Aaron</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>



  <div class="footer-custom">Hosted by <a href="https://pages.coding.me" style="font-weight:bold">Coding Pages</a></div>


        







  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1256375489&web_id=1256375489" language="JavaScript"></script>
  </div>



        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
