<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS App 生命周期 | linfuyan&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="对于iOS应用程序，关键的是要知道你的应用程序是否正在前台或后台运行。由于系统资源在iOS设备上较为有限，一个应用程序必须在后台与前台有不同的行为。操作系统也会限制你的应用程序在后台的运行，以提高电池寿命，并提高用户与前台应用程序的体验。当应用程序在前台和后台之间切换时，操作系统将会通知您的应用程序。你可以通过这些通知来修改你的应用程序的行为。
当你的应用程序在前台活动时，系统会发送触摸事件给它进">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS App 生命周期">
<meta property="og:url" content="http://yoursite.com/lifecycle-of-an-ios-application/index.html">
<meta property="og:site_name" content="linfuyan's blog">
<meta property="og:description" content="对于iOS应用程序，关键的是要知道你的应用程序是否正在前台或后台运行。由于系统资源在iOS设备上较为有限，一个应用程序必须在后台与前台有不同的行为。操作系统也会限制你的应用程序在后台的运行，以提高电池寿命，并提高用户与前台应用程序的体验。当应用程序在前台和后台之间切换时，操作系统将会通知您的应用程序。你可以通过这些通知来修改你的应用程序的行为。
当你的应用程序在前台活动时，系统会发送触摸事件给它进">
<meta property="og:image" content="http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-6.png">
<meta property="og:image" content="http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-7.png">
<meta property="og:updated_time" content="2015-08-28T11:35:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS App 生命周期">
<meta name="twitter:description" content="对于iOS应用程序，关键的是要知道你的应用程序是否正在前台或后台运行。由于系统资源在iOS设备上较为有限，一个应用程序必须在后台与前台有不同的行为。操作系统也会限制你的应用程序在后台的运行，以提高电池寿命，并提高用户与前台应用程序的体验。当应用程序在前台和后台之间切换时，操作系统将会通知您的应用程序。你可以通过这些通知来修改你的应用程序的行为。
当你的应用程序在前台活动时，系统会发送触摸事件给它进">
  
    <link rel="alternative" href="/atom.xml" title="linfuyan&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://tp2.sinaimg.cn/1132654561/180/5670253112/1" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">linfuyan</a></h1>
		</hgroup>

		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="/#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/价值/" style="font-size: 10px;">价值</a> <a href="/tags/分支模型/" style="font-size: 10px;">分支模型</a> <a href="/tags/原则/" style="font-size: 10px;">原则</a> <a href="/tags/工作流/" style="font-size: 10px;">工作流</a> <a href="/tags/应用程序/" style="font-size: 10px;">应用程序</a> <a href="/tags/生命周期/" style="font-size: 10px;">生命周期</a> <a href="/tags/程序员/" style="font-size: 10px;">程序员</a> <a href="/tags/聪明人/" style="font-size: 10px;">聪明人</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">奥巴马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">卡卡的美丽传说</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">本泽马的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">吉格斯的博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">习大大大不同</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">托蒂的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">linfuyan</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://tp2.sinaimg.cn/1132654561/180/5670253112/1" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">linfuyan</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="/#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="/#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-lifecycle-of-an-ios-application" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/lifecycle-of-an-ios-application/" class="article-date">
  	<time datetime="2015-08-28T19:27:20.000Z" itemprop="datePublished">2015-08-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOS App 生命周期
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/应用程序/">应用程序</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/生命周期/">生命周期</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/开发技术/">开发技术</a><a class="article-category-link" href="/categories/开发技术/iOS/">iOS</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>对于iOS应用程序，关键的是要知道你的应用程序是否正在前台或后台运行。由于系统资源在iOS设备上较为有限，一个应用程序必须在后台与前台有不同的行为。操作系统也会限制你的应用程序在后台的运行，以提高电池寿命，并提高用户与前台应用程序的体验。当应用程序在前台和后台之间切换时，操作系统将会通知您的应用程序。你可以通过这些通知来修改你的应用程序的行为。</p>
<p>当你的应用程序在前台活动时，系统会发送触摸事件给它进行处理。在UIKit的基础设施做了大部分的事件传递给你的自定义对象工作。所有您需要做的是覆盖在相应的对象的方法来处理这​​些事件。对于控件，UIKit会通过处理你的触摸事件，或者其他一些有趣的事情发生时调用您的自定义代码，比如当文本字段中的值更改。</p>
<h4 id="1-_应用程序的状态">1. 应用程序的状态</h4><figure class="highlight"><figcaption><span>running```(未运行)：程序没启动。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;```Inactive```(&#26410;&#28608;&#27963;)&#65306;&#31243;&#24207;&#22312;&#21069;&#21488;&#36816;&#34892;&#65292;&#19981;&#36807;&#27809;&#26377;&#25509;&#25910;&#21040;&#20107;&#20214;&#12290;&#22312;&#27809;&#26377;&#20107;&#20214;&#22788;&#29702;&#24773;&#20917;&#19979;&#31243;&#24207;&#36890;&#24120;&#20572;&#30041;&#22312;&#36825;&#20010;&#29366;&#24577;&#12290;&#10;&#10;```Active```(&#28608;&#27963;)&#65306;&#31243;&#24207;&#22312;&#21069;&#21488;&#36816;&#34892;&#32780;&#19988;&#25509;&#25910;&#21040;&#20102;&#20107;&#20214;&#12290;&#36825;&#20063;&#26159;&#21069;&#21488;&#30340;&#19968;&#20010;&#27491;&#24120;&#30340;&#27169;&#24335;&#12290;&#10;&#10;```Backgroud```(&#21518;&#21488;)&#65306;&#31243;&#24207;&#22312;&#21518;&#21488;&#32780;&#19988;&#33021;&#25191;&#34892;&#20195;&#30721;&#65292;&#22823;&#22810;&#25968;&#31243;&#24207;&#36827;&#20837;&#36825;&#20010;&#29366;&#24577;&#21518;&#20250;&#22312;&#22312;&#36825;&#20010;&#29366;&#24577;&#19978;&#20572;&#30041;&#19968;&#20250;&#12290;&#26102;&#38388;&#21040;&#20043;&#21518;&#20250;&#36827;&#20837;&#25346;&#36215;&#29366;&#24577;(Suspended)&#12290;&#26377;&#30340;&#31243;&#24207;&#32463;&#36807;&#29305;&#27530;&#30340;&#35831;&#27714;&#21518;&#21487;&#20197;&#38271;&#26399;&#22788;&#20110;Backgroud&#29366;&#24577;&#12290;&#10;&#10;```Suspended```(&#25346;&#36215;)&#65306;&#31243;&#24207;&#22312;&#21518;&#21488;&#19981;&#33021;&#25191;&#34892;&#20195;&#30721;&#12290;&#31995;&#32479;&#20250;&#33258;&#21160;&#25226;&#31243;&#24207;&#21464;&#25104;&#36825;&#20010;&#29366;&#24577;&#32780;&#19988;&#19981;&#20250;&#21457;&#20986;&#36890;&#30693;&#12290;&#24403;&#25346;&#36215;&#26102;&#65292;&#31243;&#24207;&#36824;&#26159;&#20572;&#30041;&#22312;&#20869;&#23384;&#20013;&#30340;&#65292;&#24403;&#31995;&#32479;&#20869;&#23384;&#20302;&#26102;&#65292;&#31995;&#32479;&#23601;&#25226;&#25346;&#36215;&#30340;&#31243;&#24207;&#28165;&#38500;&#25481;&#65292;&#20026;&#21069;&#21488;&#31243;&#24207;&#25552;&#20379;&#26356;&#22810;&#30340;&#20869;&#23384;&#12290;&#10;&#10;![iOS &#24212;&#29992;&#29983;&#21629;&#21608;&#26399;](http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-1.png)&#10;&#10;#### 2. &#21508;&#20010;&#31243;&#24207;&#36816;&#34892;&#29366;&#24577;&#26102;&#20195;&#29702;&#30340;&#22238;&#35843;&#10;&#10;**2.1 &#21578;&#35785;&#20195;&#29702;&#36827;&#31243;&#21551;&#21160;&#20294;&#36824;&#27809;&#36827;&#20837;&#29366;&#24577;&#20445;&#23384;**</span><br></pre></td></tr></table></figure>
<ul>
<li><p>(BOOL)application:(UIApplication <em>)application willFinishLaunchingWithOptions:(NSDictionary </em>)launchOptions<br>{<br>  NSLog(@”①告诉代理进程启动但还没进入状态保存”);<br>  return YES;<br>}</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>2.2 告诉代理启动基本完成程序准备开始运行<span class="keyword">*</span><span class="keyword">*</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>(BOOL)application:(UIApplication <em>)application didFinishLaunchingWithOptions:(NSDictionary </em>)launchOptions<br>{<br>  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];</p>
<p>  NSLog(@”②告诉代理启动基本完成程序准备开始运行”);</p>
<p>  // Override point for customization after application launch.</p>
<p>  self.window.backgroundColor = [UIColor whiteColor];<br>  [self.window makeKeyAndVisible];<br>  return YES;<br>}</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>2.3 当应用程序将要入非活动状态执行，在此期间，应用程序不接收消息或事件，比如来电话<span class="keyword">*</span><span class="keyword">*</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>(void)applicationWillResignActive:(UIApplication *)application<br>{<br>  // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.<br>  // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.<br>  NSLog(@”③当应用程序将要入非活动状态执行，在此期间，应用程序不接收消息或事件，比如来电话”);<br>}</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>2.4 当应用程序进入活动状态执行<span class="keyword">*</span><span class="keyword">*</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>(void)applicationDidBecomeActive:(UIApplication *)application<br>{<br>  // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.<br>  NSLog(@”④当应用程序进入活动状态执行”);<br>}</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>2.5 当程序被推送到后台的时候调用。所以要设置后台继续运行，则在这个函数里面设置即可<span class="keyword">*</span><span class="keyword">*</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>(void)applicationDidEnterBackground:(UIApplication *)application<br>{<br>  // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.<br>  // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.<br>  NSLog(@”⑤当程序被推送到后台的时候调用”);</p>
<p>  [application beginBackgroundTaskWithExpirationHandler:^{</p>
<pre><code><span class="function">NSLog</span>(<span class="at_rule">@<span class="string">"begin Background Task With Expiration Handler"</span>);</span>
</code></pre><p>  }];<br>}</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>2.6 当程序从后台将要重新回到前台时候调用<span class="keyword">*</span><span class="keyword">*</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>(void)applicationWillEnterForeground:(UIApplication *)application<br>{<br>  // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.<br>  NSLog(@”⑥当程序从后台将要重新回到前台时候调用”);<br>}</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>2.7 当程序将要退出是被调用，通常是用来保存数据和一些退出前的清理工作。这个需要要设置UIApplicationExitsOnSuspend的键值<span class="keyword">*</span><span class="keyword">*</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>(void)applicationWillTerminate:(UIApplication *)application<br>{<br>  // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.<br>  NSLog(@”⑦当程序将要退出是被调用”);<br>}</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>2.8 当程序载入后执行<span class="keyword">*</span><span class="keyword">*</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>(void)applicationDidFinishLaunching:(UIApplication *)application<br>{<br>  NSLog(@”⑧当程序载入后执行”);<br>}</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">程序启动时：</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>2014-07-01 15:55:14.706 LifeCycle[5845:60b] ①告诉代理进程启动但还没进入状态保存</p>
<p>2014-07-01 15:55:14.708 LifeCycle[5845:60b] ②告诉代理启动基本完成程序准备开始运行</p>
<p>2014-07-01 15:55:14.709 LifeCycle[5845:60b] ④当应用程序进入活动状态执行<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">按下Home键返回主界面：</span><br></pre></td></tr></table></figure></p>
<p>2014-07-01 15:56:11.756 LifeCycle[5845:60b] ③当应用程序将要入非活动状态执行</p>
<p>2014-07-01 15:56:11.814 LifeCycle[5845:60b] ⑤当程序被推送到后台的时候调用<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">再次打开程序：</span><br></pre></td></tr></table></figure></p>
<p>2014-07-01 15:57:19.200 LifeCycle[5845:60b] ⑥当程序从后台将要重新回到前台时候调用</p>
<p>2014-07-01 15:57:19.201 LifeCycle[5845:60b] ④当应用程序进入活动状态执行<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">#### 3. 加载应用程序进入前台</span></span><br><span class="line"></span><br><span class="line">![<span class="link_label">iOS 应用生命周期</span>](<span class="link_url">http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-2.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="header">#### 4. 加载应用程序进入后台</span></span><br><span class="line"></span><br><span class="line">![<span class="link_label">iOS 应用生命周期</span>](<span class="link_url">http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-3.png</span>)</span><br><span class="line"></span><br><span class="line"><span class="header">#### 5. 基于警告式响应中断</span></span><br><span class="line"></span><br><span class="line">![<span class="link_label">iOS 应用生命周期</span>](<span class="link_url">http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-4.png</span>)</span><br><span class="line"></span><br><span class="line">当出现这种中断时，我们需要在<span class="code">```</span>- (void)applicationWillResignActive:(UIApplication *)application<span class="code">```</span> 方法中进行如下操作：</span><br><span class="line"></span><br><span class="line"><span class="bullet">1. </span>停止timer 和其他周期性的任务</span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>停止任何正在运行的请求</span><br><span class="line"></span><br><span class="line"><span class="bullet">3. </span>暂停视频的播放</span><br><span class="line"></span><br><span class="line"><span class="bullet">4. </span>如果是游戏那就暂停它</span><br><span class="line"></span><br><span class="line"><span class="bullet">5. </span>减少OpenGL ES的帧率</span><br><span class="line"></span><br><span class="line"><span class="bullet">6. </span>挂起任何分发的队列和不重要的操作队列（你可以继续处理网络请求或其他时间敏感的后台任务）</span><br><span class="line"></span><br><span class="line">当程序回到active状态，我们需要在<span class="code">```</span>- (void)applicationDidBecomeActive:(UIApplication *)application<span class="code">```</span> 方法中重新开始上述任务。不过游戏要回到暂停状态，不能自动开始。</span><br><span class="line"></span><br><span class="line"><span class="header">#### 6. 进入后台运行</span></span><br><span class="line"></span><br><span class="line">![<span class="link_label">iOS 应用生命周期</span>](<span class="link_url">http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-5.png</span>)</span><br><span class="line"></span><br><span class="line">当应用程序进入后台时，我们应该做些什么？</span><br><span class="line"></span><br><span class="line">保存用户数据或状态信息，所有没写到磁盘的文件或信息，在进入后台时，最后都写到磁盘去，因为程序可能在后台被杀死。</span><br><span class="line"></span><br><span class="line">释放尽可能释放的内存。</span><br><span class="line"></span><br><span class="line"><span class="code">`- (void)applicationDidEnterBackground:(UIApplication *)application`</span> 方法有大概5秒的时间让你完成这些任务。如果超过时间还有未完成的任务，你的程序就会被终止而且从内存中清除。</span><br><span class="line"></span><br><span class="line">如果还需要长时间的运行任务，可以在该方法中调用</span><br></pre></td></tr></table></figure></p>
<p>[application beginBackgroundTaskWithExpirationHandler:^{</p>
<pre><code>    <span class="function">NSLog</span>(<span class="at_rule">@<span class="string">"begin Background Task With Expiration Handler"</span>);</span>

}];
</code></pre><p>```</p>
<p>应用程序在后台时的内存使用：请求后台运行时间和启动线程来运行长时间运行的任务。</p>
<p>在后台时，每个应用程序都应该释放最大的内存。系统努力的保持更多的应用程序在后台同时 运行。不过当内存不足时，会终止一些挂起的程序来回收内存，那些内存最大的程序首先被终止。</p>
<p>事实上，应用程序应该的对象如果不再使用了，那就应该尽快的去掉强引用，这样编译器可以回收这些内存。如果你想缓存一些对象提升程序的性能，你可以在进入后台时，把这些对象去掉强引用。</p>
<p>下面这样的对象应该尽快的去掉强引用：</p>
<ol>
<li><p>图片对象</p>
</li>
<li><p>你可以重新加载的 大的视频或数据文件</p>
</li>
<li><p>任何没用而且可以轻易创建的对象</p>
</li>
</ol>
<p>在后台时，为了减少程序占用的内存，系统会自动在回收一些系统帮助你开辟的内存。比如：</p>
<ol>
<li><p>系统回收Core Animation的后备存储。</p>
</li>
<li><p>去掉任何系统引用的缓存图片</p>
</li>
<li><p>去掉系统管理数据缓存强引用</p>
</li>
</ol>
<h4 id="7-_返回前台运行">7. 返回前台运行</h4><p><img src="http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-6.png" alt="iOS 应用生命周期"></p>
<p>在暂停状态的应用程序必须准备处理任何排队的通知时，它返回到前台或后台执行状态。暂停的应用程序不执行任何代码，因此不能处理与方向的变化，时间的变化，偏好的变化，以及许多其他会影响应用程序的外观或状态的通知。为了确保这些更改不会丢失，系统排队许多相关的通知，并把它们传递给应用程序，只要它开始再次执行代码（无论是在前景或背景）。为了防止由偏快转为超载与它恢复时通知您的应用程序，该系统凝聚事件，并提供一个单一的通知（每个相关类型），反映了净变化，因为你的应用程序被暂停。</p>
<h4 id="8-_程序终止">8. 程序终止</h4><p>程序只要符合以下情况之一，只要进入后台或挂起状态就会终止：</p>
<ol>
<li><p>iOS4.0以前的系统</p>
</li>
<li><p>app是基于iOS4.0之前系统开发的。</p>
</li>
<li><p>设备不支持多任务</p>
</li>
<li><p>在Info.plist文件中，程序包含了 <code>UIApplicationExitsOnSuspend</code> 键。</p>
</li>
</ol>
<p>app如果终止了，系统会调用app的代理的方法 <code>- (void)applicationWillTerminate:(UIApplication *)application</code>，这样可以让你可以做一些清理工作。你可以保存一些数据或app的状态。这个方法也有5秒钟的限制。超时后方法会返回程序从内存中清除。</p>
<p>注意：用户可以手工关闭应用程序。</p>
<h4 id="9-_The_Main_Run_Loop_主运行循环">9. The Main Run Loop 主运行循环</h4><p>Main Run Loop负责处理用户相关的事件。UIApplication对象在程序启动时启动main run Loop，它处理事件和更新视图的界面。看Main Run Loop就知道，它是运行在程序的主线程上的。这样保证了接收到用户相关操作的事件是按顺序处理的。 </p>
<p>用户操作设备，相关的操作事件被系统生成并通过UIKit的指定端口分发。事件在内部排成队列，一个个的分发到Main run loop 去做处理。UIApplication对象是第一个接收到时间的对象，它决定事件如何被处理。触摸事件分发到主窗口，窗口再分发到对应出发触摸事件的View。其他的事件通过其他途径分发给其他对象变量做处理。 </p>
<p>大部分的事件可以在你的应用里分发，类似于触摸事件，远程操控事件（线控耳机等）都是由app的 responder objects 对象处理的。Responder objects 在你的app里到处都是，比如：UIApplication 对象，view对象，view controller 对象，都是resopnder objects。大部分事件的目标都指定了resopnder object，不过事件也可以传递给其他对象。比如，如果view对象不处理事件，可以传给父类view或者view controller。</p>
<p><img src="http://7sbydj.com1.z0.glb.clouddn.com/ios-app-lifecycle-7.png" alt="iOS 应用生命周期"></p>
<p>英文原文：<a href="https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20" target="_blank" rel="external">App States and Multitasking</a><br>译文出处：<a href="http://www.cnblogs.com/EverNight/p/3818570.html" target="_blank" rel="external">iOS App的生命周期</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/a-successful-git-branching-model/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">一个成功的 Git 分支模型</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>





</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 linfuyan
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>